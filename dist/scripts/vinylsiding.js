"use strict";function Vinylsiding(){window.onload=function(){Vinylsiding.prototype.setDynamicHeights(),Vinylsiding.prototype.secureTargetBlank(),Vinylsiding.prototype.modal.attachBodyListener(),Vinylsiding.prototype.modal.addOverlayToDOM(),Vinylsiding.prototype.lazyLoad()}}function VinylUtil(){return this}function PersistentStorageClass(){void 0===window.PersistentStorage&&(window.PersistentStorage={elements:{},data:{},uniq:1})}function VinylLocks(){}function Draggable(t){var e=document.querySelector(t.containerSelector);if(!e)throw"Draggable containerSelector refers to non-existant element.";VS.util.addClass(e,"draggable-initialized");var o={containerSelector:t.containerSelector,callback:t.callback,lastMousePos:null};this.setData(e,o),this.md(!1);var n=e.getElementsByTagName("img");if(n||n.length)for(var i=0,a=n.length;i<a;i++)n[i].setAttribute("draggable","false");VS.util.addEvents(["mousemove","touchmove"],e,function(t){window.Draggable.prototype.dragEvent(t)},!0),e.addEventListener("mousedown",function(t){return t.preventDefault(),!0},!0),VS.util.addEvents(["mouseup","touchend","touchcancel"],document.body,function(){window.Draggable.prototype.reset(e)},!0),VS.util.isSafari()&&(VS.util.addEvents(["mousedown","touchstart"],document.body,function(){this.md(!0)},!0),VS.util.addEvents(["mouseup","touchend","touchcancel"],document.body,function(){this.md(!1)},!0))}function VinylTemplate(){}function VinylModal(){return this}Vinylsiding.prototype.secureTargetBlank=function(){var t=document.querySelectorAll('a[target="_blank"]');if(t&&t.length)for(var e=0,o=t.length;e<o;e++)t[e].setAttribute("rel","noopener noreferrer")},Vinylsiding.prototype.setDynamicHeights=function(){var t=document.querySelectorAll(".set-height");if(!t||!t.length)return!1;for(var e,o,n=0,i=t.length;n<i;n++)e=t[n].getAttribute("data-height-ref"),(o=e?document.querySelector("#"+e):t[n])&&this.util.setHeightOnElement(t[n],o)},Vinylsiding.prototype.lazyLoad=function(){var t=document.querySelectorAll(".vinyl-lazyloader");if(t.length)for(var e,o,n,i,a=0,r=t.length;a<r;a++)e=t[0],o=e.querySelector(".base-image"),n=new Image,n.onload=function(){VS.util.addClass(o,"loaded"),VS.util.removeClass(o,"blurry")},n.src=o.src,i=new Image,i.onload=function(){i.classList.add("loaded")},i.src=o.dataset.vimageLarge,e.appendChild(i)},VinylUtil.prototype.isImageOk=function(t){return!(!t.complete||void 0!==t.naturalWidth&&0===t.naturalWidth)},VinylUtil.prototype.toggleClass=function(t,e){return!(!t||!e)&&(this.hasClass(t,e)?this.removeClass(t,e):this.addClass(t,e))},VinylUtil.prototype.hasClass=function(t,e){if("."===e.charAt(0)&&(e=e.substr(1)),"string"!=typeof t.className)return!1;if(t.className===e)return!0;if(!t.className.match(e))return!1;var o=t.className.split(" ");if(!o||!o.length)return!1;for(var n=0,i=o.length;n<i;n++)if(o[n]===e)return!0;return!1},VinylUtil.prototype.addClass=function(t,e){return void 0!==t.className&&(!!this.hasClass(t,e)||(t.className=t.className+" "+e,!0))},VinylUtil.prototype.setHeightOnElement=function(t,e){return t.style.height=e.offsetHeight+"px",!0},VinylUtil.prototype.removeClass=function(t,e){if(void 0===t.className)return!1;if(!this.hasClass(t,e))return!1;for(var o=t.className.split(" "),n=[],i=0,a=o.length;i<a;i++)o[i]!==e&&n.push(o[i]);return t.className=n.join(" "),!0},VinylUtil.prototype.findParentWithClass=function(t,e,o){var n=!1,i=0;for(o||(o=100);null!==t&&!n&&i<o;){if("BODY"===t.tagName)return!1;this.hasClass(t,e)?n=t:t=t.parentNode,i++}return n},VinylUtil.prototype.findParentLink=function(t,e){var o=!1,n=0;for(e||(e=100);null!==t&&!o&&n<e;){if("BODY"===t.tagName)return!1;"a"===t.localName.toLowerCase()?o=t:t=t.parentNode,n++}return o},VinylUtil.prototype.findFirstChild=function(t){for(var e=t.firstChild;e&&1!==e.nodeType;)e=e.nextSibling;return e},VinylUtil.prototype.getParam=function(t){var e=window.location.search.toLowerCase().substring(1),o=[];e.indexOf("&")<=-1?o.push(e):o=e.split("&");for(var n,i=0,a=o.length;i<a;i++)if(n=this.compareKeyValuePair(o[i],t))return n;return!1},VinylUtil.prototype.compareKeyValuePair=function(t,e){var o=t.split("=");if(2!==o.length)return!1;var n=decodeURIComponent(o[0]),i=decodeURIComponent(o[1]);return n.toString()===e&&i},VinylUtil.prototype.scrollIntoView=function(t,e){e||(e="top");var o,n=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);switch(e){case"bottom":var i=this.getPosition(t).y+n,a=t.offsetHeight,r=i+a,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,s=r-l+30;o=s>=0?s:0;break;case"top":o=this.getPosition(t).y;break;default:throw"Invalid position."}if(n!==o)var d=window.setInterval(function(){if(n!==o){var t=1,e=Math.abs(n-o);e<10?t=e:t+=Math.floor(Math.sqrt(e)),n>o?n-=t:n+=t,window.scrollTo(0,n)}else window.clearInterval(d)},25)},VinylUtil.prototype.waitUntilVisible=function(t,e){var o=window.setInterval(function(){VS.util.checkVisible(document.querySelector(t))&&(window.clearInterval(o),e())},500)},VinylUtil.prototype.getPosition=function(t){for(var e=0,o=0;t;)e+=t.offsetLeft-t.scrollLeft+t.clientLeft,o+=t.offsetTop-t.scrollTop+t.clientTop,t=t.offsetParent;return{x:e,y:o}},VinylUtil.prototype.checkVisible=function(t){if(!t)throw"Invalid Element";var e=t.getBoundingClientRect(),o=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(e.bottom<0||e.top-o>=0)},VinylUtil.prototype.iOS=function(){var t=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;t.length;)if(navigator.platform===t.pop())return!0;return!1},VinylUtil.prototype.isSafari=function(){var t=navigator.userAgent.toLowerCase();return t.indexOf("safari")!==-1&&!(t.indexOf("chrome")>-1)},VinylUtil.prototype.getMouseCoordinates=function(t){if(void 0!==t.pageX&&void 0!==t.pageY)return[t.pageX,t.pageY];if(t.touches&&t.touches.length)return[t.touches[0].pageX,t.touches[0].pageY];throw"No coordinates in passed event."},VinylUtil.prototype.addEvents=function(t,e,o,n){void 0===n&&(n=!1);for(var i=0,a=t.length;i<a;i++)e.addEventListener(t[i],o,n)},Vinylsiding.prototype.util=new VinylUtil,PersistentStorageClass.prototype.setData=function(t,e,o){void 0===window.PersistentStorage.data[t]&&(window.PersistentStorage.data[t]={}),window.PersistentStorage.data[t][e]=o},PersistentStorageClass.prototype.getData=function(t,e){if(void 0!==window.PersistentStorage&&void 0!==window.PersistentStorage.data[t]&&void 0!==window.PersistentStorage.data[t][e])return window.PersistentStorage.data[t][e]},PersistentStorageClass.prototype.getElementId=function(t){return t.getAttribute("data-ps-id")},PersistentStorageClass.prototype.deleteModule=function(t){void 0!==window.PersistentStorage.data[t]&&delete window.PersistentStorage.data[t],void 0!==window.PersistentStorage.elements[t]&&delete window.PersistentStorage.elements[t]},PersistentStorageClass.prototype.deleteField=function(t,e){void 0!==window.PersistentStorage.data[t]&&delete window.PersistentStorage.data[t][e]},PersistentStorageClass.prototype.setElementData=function(t,e,o){var n=this.getElementId(t);if(!n&&!(n=this.tagElement(t,e)))throw"Element that should have an ID does not.";void 0===window.PersistentStorage.elements[e]&&(window.PersistentStorage.elements[e]={}),void 0===window.PersistentStorage.elements[e][n]&&(window.PersistentStorage.elements[e][n]={}),window.PersistentStorage.elements[e][n]=o},PersistentStorageClass.prototype.getElementData=function(t,e){var o=this.getElementId(t);if(o&&void 0!==window.PersistentStorage&&void 0!==window.PersistentStorage.elements[e]&&void 0!==window.PersistentStorage.elements[e][o])return window.PersistentStorage.elements[e][o]},PersistentStorageClass.prototype.deleteElementData=function(t,e){var o=this.getElementId(t);if(!o||void 0===window.PersistentStorage||void 0===window.PersistentStorage.elements[e]||void 0===window.PersistentStorage.elements[e][o])return void console.warn("Call to delete non-existant element data");delete window.PersistentStorage.elements[o][e]},PersistentStorageClass.prototype.nextID=function(){return(window.PersistentStorage.uniq++).toString()},PersistentStorageClass.prototype.tagElement=function(t){var e=this.nextID();return t.setAttribute("data-ps-id",e),e},Vinylsiding.prototype.data=new PersistentStorageClass,VinylLocks.prototype.acquireLock=function(t,e){return!!t&&(e||(e=1),!this.checkLock(t)&&(VS.data.setData("VinylLocks",t,Date.now()+e),!0))},VinylLocks.prototype.checkLock=function(t){var e=VS.data.getData("VinylLocks",t);return void 0!==e&&(!(e<Date.now())||(this.clearLock(t),!1))},VinylLocks.prototype.clearLock=function(t){VS.data.deleteField("VinylLocks",t)},Vinylsiding.prototype.locks=new VinylLocks,Draggable.prototype.md=function(t){VS.data.setData("draggable-global","mouseIsDown",t)},Draggable.prototype.reset=function(t){this.setData(t,null,"lastMousePos"),this.md(!1)},Draggable.prototype.mouseIsUp=function(t){return VS.util.isSafari()?!VS.data.getData("draggable-global","mouseIsDown"):void 0!==t.buttons&&0===t.buttons},Draggable.prototype.setData=function(t,e,o){var n=this.getData(t);"string"==typeof o?n[o]=e:n=e,VS.data.setElementData(t,"Draggable",n)},Draggable.prototype.getData=function(t){return VS.data.getElementData(t,"Draggable")},Draggable.prototype.dragEvent=function(t){"show"===document.body.getAttribute("data-vinyl-overlay")&&t.preventDefault();var e=VS.util.findParentWithClass(t.target,"draggable-initialized");if(e&&!Draggable.prototype.mouseIsUp(t)){var o=Draggable.prototype.getData(e);if(VS.locks.acquireLock(o.containerSelector,1e4)){var n=VS.util.getMouseCoordinates(t);if(!o.lastMousePos)return this.setData(e,n,"lastMousePos"),void VS.locks.clearLock(o.containerSelector);try{o.callback(event,e,n,o.lastMousePos)}catch(t){throw VS.locks.clearLock(o.containerSelector),console.error(t),"Draggable callback failed"}finally{this.setData(e,n,"lastMousePos"),VS.locks.clearLock(o.containerSelector)}}}};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};VinylTemplate.prototype.createElement=function(t,e,o){var n=document.createElement(t);void 0===e&&(e={}),void 0!==e.class&&(n.className=e.class,delete e.class),"img"===t&&void 0!==e.src&&(n.src=e.src,delete e.src);for(var i in e)n.setAttribute(i,e[i]);return void 0!==o&&this.setInnerHTML([n],o),n},VinylTemplate.prototype.setInnerHTML=function(t,e){if(!t||!t.length)throw"SetInnerHTML expects NodeList";for(var o=0,n=t.length;o<n;o++)switch(void 0===e?"undefined":_typeof(e)){case"string":t[o].textContent=e;break;case"object":if(this.emptyElement(t[o]),Array.isArray(e))for(var i=0,a=e.length;i<a;i++)t[o].appendChild(e[i]);else t[o].appendChild(e);break;default:throw"Unsupported content type in VinylTemplate.setInnerHTML"}},VinylTemplate.prototype.emptyElement=function(t){for(;t.firstChild;)t.removeChild(t.firstChild)},Vinylsiding.prototype.template=new VinylTemplate,VinylModal.prototype.attachBodyListener=function(){document.body.addEventListener("click",function(t){var e={},o=VS.util.findParentWithClass(t.target,"vmodal-trigger");if(o){for(var n in o.dataset)"vmodal"===n.slice(0,6)&&(e[n]=o.dataset[n]);VS.modal.handleOpenClick(e)}},!0)},VinylModal.prototype.addOverlayToDOM=function(){if(!document.querySelector(".overlay-top-level")){var t=document.createElement("div");t.className="overlay-top-level",document.onkeydown=function(t){t=t||window.event;("key"in t?"Escape"===t.key||"Esc"===t.key:27==t.keyCode)&&"true"===document.body.getAttribute("data-vinyl-overlay-closable")&&VS.modal.hideOverlay()},document.body.appendChild(t)}},VinylModal.prototype.handleClickableClick=function(t){t.stopPropagation();var e=VS.util.findParentWithClass(t.target,"overlaid-item");if(!e)return VS.modal.hideOverlay();var o=e.getAttribute("data-vmodal-close");if(o)return VS.util.hasClass(t.target,o)?VS.modal.hideOverlay():void 0},VinylModal.prototype.handleOpenClick=function(t){VS.modal.showOverlay("true"===t.vmodalClick||t.vmodalClick===!0),VS.modal.showContent(t)},VinylModal.prototype.handleCloseClick=function(t){if(VS.util.findParentWithClass(t.target,"clickable"))VS.modal.handleClickableClick(t);else if("true"===document.body.getAttribute("data-vinyl-overlay-closable"))return VS.modal.hideOverlay()},VinylModal.prototype.showOverlay=function(t){document.body.setAttribute("data-vinyl-overlay","show"),t&&document.body.setAttribute("data-vinyl-overlay-closable","true")},VinylModal.prototype.hideOverlay=function(){document.body.setAttribute("data-vinyl-overlay","hide"),document.body.removeAttribute("data-vinyl-overlay-closable"),VS.modal.hideContent()},VinylModal.prototype.showContent=function(t){var e=document.querySelector(t.vmodalContent);VS.util.addClass(e,"overlaid-item"),VS.util.removeClass(e,"hidden"),e.setAttribute("data-vmodal-close",t.vmodalDismiss),e.addEventListener("click",VS.modal.handleCloseClick)},VinylModal.prototype.hideContent=function(){var t=document.querySelector(".overlaid-item");t&&(VS.util.addClass(t,"hidden"),VS.util.removeClass(t,"overlaid-item"),t.removeEventListener("click",VS.modal.handleCloseClick))},Vinylsiding.prototype.modal=new VinylModal,function(t,e){"function"==typeof define&&define.amd?define(["b"],e):(t=t||window,t.VS=e())}(void 0,function(){return new Vinylsiding});