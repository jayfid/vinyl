"use strict";function Vinylsiding(e){window.onload=function(){Vinylsiding.prototype.addOverlayToDOM(),Vinylsiding.prototype.setDynamicHeights(),Vinylsiding.prototype.secureTargetBlank()}}function VinylUtil(){return this}function PersistentStorageClass(){"undefined"==typeof window.PersistentStorage&&(window.PersistentStorage={elements:{},data:{},uniq:1})}function VinylLocks(){}function Draggable(e){var t=document.querySelector(e.containerSelector);if(!t)throw"Draggable containerSelector refers to non-existant element.";VS.util.addClass(t,"draggable-initialized");var n={containerSelector:e.containerSelector,callback:e.callback,lastMousePos:null};this.setData(t,n),this.md(!1);var o=t.getElementsByTagName("img");if(o||o.length)for(var i=0,r=o.length;i<r;i++)o[i].setAttribute("draggable","false");VS.util.addEvents(["mousemove","touchmove"],t,function(e){window.Draggable.prototype.dragEvent(e)},!0),t.addEventListener("mousedown",function(e){return e.preventDefault(),!0},!0),VS.util.addEvents(["mouseup","touchend","touchcancel"],document.body,function(){window.Draggable.prototype.reset(t)},!0),VS.util.isSafari()&&(VS.util.addEvents(["mousedown","touchstart"],document.body,function(){this.md(!0)},!0),VS.util.addEvents(["mouseup","touchend","touchcancel"],document.body,function(){this.md(!1)},!0))}function VinylTemplate(){}function VinylModal(e){var t=document.querySelector(e.triggerSelector);if(!t)throw"Modal trigger element not found.";t.addEventListener("click",VinylModal.prototype.handleOpenClick)}Vinylsiding.prototype.secureTargetBlank=function(){var e=document.querySelectorAll('a[target="_blank"]');if(e&&e.length)for(var t=0,n=e.length;t<n;t++)e[t].setAttribute("rel","noopener noreferrer")},Vinylsiding.prototype.setDynamicHeights=function(){var e=document.querySelectorAll(".set-height");if(!e||!e.length)return!1;for(var t,n,o=0,i=e.length;o<i;o++)t=e[o].getAttribute("data-height-ref"),n=t?document.querySelector("#"+t):e[o],n&&this.util.setHeightOnElement(e[o],n)},Vinylsiding.prototype.addOverlayToDOM=function(){var e=document.createElement("div");e.className="overlay-top-level",e.addEventListener("click",function(){"true"===document.body.getAttribute("data-vinyl-overlay-closable")&&Vinylsiding.prototype.hideOverlay()},!0),document.body.appendChild(e)},Vinylsiding.prototype.showOverlay=function(e){document.body.setAttribute("data-vinyl-overlay","show"),e&&document.body.setAttribute("data-vinyl-overlay-closable","true")},Vinylsiding.prototype.hideOverlay=function(){document.body.setAttribute("data-vinyl-overlay","hide"),document.body.removeAttribute("data-vinyl-overlay-closable")},VinylUtil.prototype.isImageOk=function(e){return!(!e.complete||"undefined"!=typeof e.naturalWidth&&0===e.naturalWidth)},VinylUtil.prototype.toggleClass=function(e,t){return!(!e||!t)&&(this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t))},VinylUtil.prototype.hasClass=function(e,t){if("string"!=typeof e.className)return!1;if(e.className===t)return!0;if(!e.className.match(t))return!1;var n=e.className.split(" ");if(!n||!n.length)return!1;for(var o=0,i=n.length;o<i;o++)if(n[o]===t)return!0;return!1},VinylUtil.prototype.addClass=function(e,t){return"undefined"!=typeof e.className&&(!!this.hasClass(e,t)||(e.className=e.className+" "+t,!0))},VinylUtil.prototype.setHeightOnElement=function(e,t){return e.style.height=t.offsetHeight+"px",!0},VinylUtil.prototype.removeClass=function(e,t){if("undefined"==typeof e.className)return!1;if(!this.hasClass(e,t))return!1;for(var n=e.className.split(" "),o=[],i=0,r=n.length;i<r;i++)n[i]!==t&&o.push(n[i]);return e.className=o.join(" "),!0},VinylUtil.prototype.findParentWithClass=function(e,t,n){var o=!1,i=0;for(n||(n=100);null!==e&&!o&&i<n;){if("BODY"===e.tagName)return!1;this.hasClass(e,t)?o=e:e=e.parentNode,i++}return o},VinylUtil.prototype.findParentLink=function(e,t){var n=!1,o=0;for(t||(t=100);null!==e&&!n&&o<t;){if("BODY"===e.tagName)return!1;"a"===e.localName.toLowerCase()?n=e:e=e.parentNode,o++}return n},VinylUtil.prototype.findFirstChild=function(e){for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;return t},VinylUtil.prototype.getParam=function(e){var t=window.location.search.toLowerCase().substring(1),n=[];t.indexOf("&")<=-1?n.push(t):n=t.split("&");for(var o,i=0,r=n.length;i<r;i++)if(o=this.compareKeyValuePair(n[i],e))return o;return!1},VinylUtil.prototype.compareKeyValuePair=function(e,t){var n=e.split("=");if(2!==n.length)return!1;var o=decodeURIComponent(n[0]),i=decodeURIComponent(n[1]);return o.toString()===t&&i},VinylUtil.prototype.scrollIntoView=function(e,t){t||(t="top");var n,o=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);switch(t){case"bottom":var i=this.getPosition(e).y+o,r=e.offsetHeight,a=i+r,s=30,l=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=a-l+s;n=d>=0?d:0;break;case"top":n=this.getPosition(e).y;break;default:throw"Invalid position."}var u=o;if(u!==n)var c=window.setInterval(function(){if(o!==n){var e=1,t=Math.abs(o-n);t<10?e=t:e+=Math.floor(Math.sqrt(t)),o>n?o-=e:o+=e,window.scrollTo(0,o)}else window.clearInterval(c)},25)},VinylUtil.prototype.waitUntilVisible=function(e,t){var n=window.setInterval(function(){this.checkVisible(document.querySelector(e))&&(window.clearInterval(n),t())},500)},VinylUtil.prototype.getPosition=function(e){for(var t=0,n=0;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,n+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:n}},VinylUtil.prototype.checkVisible=function(e){if(!e)throw"Invalid Element";var t=e.getBoundingClientRect(),n=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(t.bottom<0||t.top-n>=0)},VinylUtil.prototype.iOS=function(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;e.length;)if(navigator.platform===e.pop())return!0;return!1},VinylUtil.prototype.isSafari=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")!==-1&&!(e.indexOf("chrome")>-1)},VinylUtil.prototype.getMouseCoordinates=function(e){if("undefined"!=typeof e.pageX&&"undefined"!=typeof e.pageY)return[e.pageX,e.pageY];if(e.touches&&e.touches.length)return[e.touches[0].pageX,e.touches[0].pageY];throw"No coordinates in passed event."},VinylUtil.prototype.addEvents=function(e,t,n,o){"undefined"==typeof o&&(o=!1);for(var i=0,r=e.length;i<r;i++)t.addEventListener(e[i],n,o)},Vinylsiding.prototype.util=new VinylUtil,PersistentStorageClass.prototype.setData=function(e,t,n){"undefined"==typeof window.PersistentStorage.data[e]&&(window.PersistentStorage.data[e]={}),window.PersistentStorage.data[e][t]=n},PersistentStorageClass.prototype.getData=function(e,t){if("undefined"!=typeof window.PersistentStorage&&"undefined"!=typeof window.PersistentStorage.data[e]&&"undefined"!=typeof window.PersistentStorage.data[e][t])return window.PersistentStorage.data[e][t]},PersistentStorageClass.prototype.getElementId=function(e){return e.getAttribute("data-ps-id")},PersistentStorageClass.prototype.deleteModule=function(e){"undefined"!=typeof window.PersistentStorage.data[e]&&delete window.PersistentStorage.data[e],"undefined"!=typeof window.PersistentStorage.elements[e]&&delete window.PersistentStorage.elements[e]},PersistentStorageClass.prototype.deleteField=function(e,t){"undefined"!=typeof window.PersistentStorage.data[e]&&delete window.PersistentStorage.data[e][t]},PersistentStorageClass.prototype.setElementData=function(e,t,n){var o=this.getElementId(e);if(!o&&(o=this.tagElement(e,t),!o))throw"Element that should have an ID does not.";"undefined"==typeof window.PersistentStorage.elements[t]&&(window.PersistentStorage.elements[t]={}),"undefined"==typeof window.PersistentStorage.elements[t][o]&&(window.PersistentStorage.elements[t][o]={}),window.PersistentStorage.elements[t][o]=n},PersistentStorageClass.prototype.getElementData=function(e,t){var n=this.getElementId(e);if(n&&"undefined"!=typeof window.PersistentStorage&&"undefined"!=typeof window.PersistentStorage.elements[t]&&"undefined"!=typeof window.PersistentStorage.elements[t][n])return window.PersistentStorage.elements[t][n]},PersistentStorageClass.prototype.deleteElementData=function(e,t){var n=this.getElementId(e);return n&&"undefined"!=typeof window.PersistentStorage&&"undefined"!=typeof window.PersistentStorage.elements[t]&&"undefined"!=typeof window.PersistentStorage.elements[t][n]?void delete window.PersistentStorage.elements[n][t]:void console.debug("Call to delete non-existant element data")},PersistentStorageClass.prototype.nextID=function(){var e=window.PersistentStorage.uniq++;return e.toString()},PersistentStorageClass.prototype.tagElement=function(e,t){var n=this.nextID();return e.setAttribute("data-ps-id",n),n},Vinylsiding.prototype.data=new PersistentStorageClass,VinylLocks.prototype.acquireLock=function(e,t){return!!e&&(t||(t=1),!this.checkLock(e)&&(VS.data.setData("VinylLocks",e,Date.now()+t),!0))},VinylLocks.prototype.checkLock=function(e){var t=VS.data.getData("VinylLocks",e);return"undefined"!=typeof t&&(!(t<Date.now())||(this.clearLock(e),!1))},VinylLocks.prototype.clearLock=function(e){VS.data.deleteField("VinylLocks",e)},Vinylsiding.prototype.locks=new VinylLocks,Draggable.prototype.md=function(e){VS.data.setData("draggable-global","mouseIsDown",e)},Draggable.prototype.reset=function(e){this.setData(e,null,"lastMousePos"),this.md(!1)},Draggable.prototype.mouseIsUp=function(e){return VS.util.isSafari()?!VS.data.getData("draggable-global","mouseIsDown"):"undefined"!=typeof e.buttons&&0===e.buttons},Draggable.prototype.setData=function(e,t,n){var o=this.getData(e);"string"==typeof n?o[n]=t:o=t,VS.data.setElementData(e,"Draggable",o)},Draggable.prototype.getData=function(e){return VS.data.getElementData(e,"Draggable")},Draggable.prototype.dragEvent=function(e){"show"===document.body.getAttribute("data-vinyl-overlay")&&e.preventDefault();var t=VS.util.findParentWithClass(e.target,"draggable-initialized");if(t&&!Draggable.prototype.mouseIsUp(e)){var n=Draggable.prototype.getData(t);if(VS.locks.acquireLock(n.containerSelector,1e4)){var n=this.getData(t),o=VS.util.getMouseCoordinates(e);if(!n.lastMousePos)return this.setData(t,o,"lastMousePos"),void VS.locks.clearLock(n.containerSelector);try{n.callback(event,t,o,n.lastMousePos)}catch(e){throw VS.locks.clearLock(n.containerSelector),console.log(e),"Draggable callback failed"}finally{this.setData(t,o,"lastMousePos"),VS.locks.clearLock(n.containerSelector)}}}};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};VinylTemplate.prototype.createElement=function(e,t,n){var o=document.createElement(e);"undefined"==typeof t&&(t={}),"undefined"!=typeof t.class&&(o.className=t.class,delete t.class),"img"===e&&"undefined"!=typeof t.src&&(o.src=t.src,delete t.src);for(var i in t)o.setAttribute(i,t[i]);return"undefined"!=typeof n&&this.setInnerHTML([o],n),o},VinylTemplate.prototype.setInnerHTML=function(e,t){if(!e||!e.length)throw"SetInnerHTML expects NodeList";for(var n=0,o=e.length;n<o;n++)switch("undefined"==typeof t?"undefined":_typeof(t)){case"string":e[n].textContent=t;break;case"object":if(this.emptyElement(e[n]),Array.isArray(t))for(var i=0,r=t.length;i<r;i++)e[n].appendChild(t[i]);else e[n].appendChild(t);break;default:throw"Unsupported content type in VinylTemplate.setInnerHTML"}},VinylTemplate.prototype.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},Vinylsiding.prototype.template=new VinylTemplate,function(e,t){"function"==typeof define&&define.amd?define(["b"],t):(e=e||window,e.VS=t())}(void 0,function(){return new Vinylsiding});