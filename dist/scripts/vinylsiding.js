"use strict";function Vinylsiding(e){window.onload=function(){Vinylsiding.prototype.setDynamicHeights(),Vinylsiding.prototype.secureTargetBlank(),Vinylsiding.prototype.modal.prototype.addOverlayToDOM(),Vinylsiding.prototype.lazyLoad()}}function VinylUtil(){return this}function PersistentStorageClass(){"undefined"==typeof window.PersistentStorage&&(window.PersistentStorage={elements:{},data:{},uniq:1})}function VinylLocks(){}function Draggable(e){var t=document.querySelector(e.containerSelector);if(!t)throw"Draggable containerSelector refers to non-existant element.";VS.util.addClass(t,"draggable-initialized");var o={containerSelector:e.containerSelector,callback:e.callback,lastMousePos:null};this.setData(t,o),this.md(!1);var n=t.getElementsByTagName("img");if(n||n.length)for(var i=0,a=n.length;i<a;i++)n[i].setAttribute("draggable","false");VS.util.addEvents(["mousemove","touchmove"],t,function(e){window.Draggable.prototype.dragEvent(e)},!0),t.addEventListener("mousedown",function(e){return e.preventDefault(),!0},!0),VS.util.addEvents(["mouseup","touchend","touchcancel"],document.body,function(){window.Draggable.prototype.reset(t)},!0),VS.util.isSafari()&&(VS.util.addEvents(["mousedown","touchstart"],document.body,function(){this.md(!0)},!0),VS.util.addEvents(["mouseup","touchend","touchcancel"],document.body,function(){this.md(!1)},!0))}function VinylTemplate(){}function VinylModal(e){e.clickToClose="boolean"!=typeof e.clickToClose||e.clickToClose;var t=document.querySelector(e.triggerSelector);if(!t)throw"Modal trigger element not found.";var o=document.querySelector(e.contentSelector);if(!o)throw"Modal content element not found.";o.setAttribute("data-vmodal-close",e.hideSelector),VS.util.addClass(o,"modal-content"),t.setAttribute("data-vmodal-content",e.contentSelector),t.setAttribute("data-vmodal-clickclose",e.clickToClose.toString()),VS.util.addClass(t,"modal-trigger"),"function"==typeof e.openCallBack?t.addEventListener("click",e.openCallBack):t.addEventListener("click",VinylModal.prototype.handleOpenClick)}Vinylsiding.prototype.secureTargetBlank=function(){var e=document.querySelectorAll('a[target="_blank"]');if(e&&e.length)for(var t=0,o=e.length;t<o;t++)e[t].setAttribute("rel","noopener noreferrer")},Vinylsiding.prototype.setDynamicHeights=function(){var e=document.querySelectorAll(".set-height");if(!e||!e.length)return!1;for(var t,o,n=0,i=e.length;n<i;n++)t=e[n].getAttribute("data-height-ref"),o=t?document.querySelector("#"+t):e[n],o&&this.util.setHeightOnElement(e[n],o)},Vinylsiding.prototype.lazyLoad=function(){var e=document.querySelectorAll(".vinyl-lazyloader");if(!e.length)return void console.debug("returning with no elements");for(var t,o,n,i,a=0,r=e.length;a<r;a++)t=e[0],o=t.querySelector(".base-image"),n=new Image,n.onload=function(){console.log(o),VS.util.addClass(o,"loaded"),VS.util.removeClass(o,"blurry")},n.src=o.src,i=new Image,i.onload=function(){i.classList.add("loaded")},i.src=o.dataset.vimageLarge,t.appendChild(i)},VinylUtil.prototype.isImageOk=function(e){return!(!e.complete||"undefined"!=typeof e.naturalWidth&&0===e.naturalWidth)},VinylUtil.prototype.toggleClass=function(e,t){return!(!e||!t)&&(this.hasClass(e,t)?this.removeClass(e,t):this.addClass(e,t))},VinylUtil.prototype.hasClass=function(e,t){if("string"!=typeof e.className)return!1;if(e.className===t)return!0;if(!e.className.match(t))return!1;var o=e.className.split(" ");if(!o||!o.length)return!1;for(var n=0,i=o.length;n<i;n++)if(o[n]===t)return!0;return!1},VinylUtil.prototype.addClass=function(e,t){return"undefined"!=typeof e.className&&(!!this.hasClass(e,t)||(e.className=e.className+" "+t,!0))},VinylUtil.prototype.setHeightOnElement=function(e,t){return e.style.height=t.offsetHeight+"px",!0},VinylUtil.prototype.removeClass=function(e,t){if("undefined"==typeof e.className)return!1;if(!this.hasClass(e,t))return!1;for(var o=e.className.split(" "),n=[],i=0,a=o.length;i<a;i++)o[i]!==t&&n.push(o[i]);return e.className=n.join(" "),!0},VinylUtil.prototype.findParentWithClass=function(e,t,o){var n=!1,i=0;for(o||(o=100);null!==e&&!n&&i<o;){if("BODY"===e.tagName)return!1;this.hasClass(e,t)?n=e:e=e.parentNode,i++}return n},VinylUtil.prototype.findParentLink=function(e,t){var o=!1,n=0;for(t||(t=100);null!==e&&!o&&n<t;){if("BODY"===e.tagName)return!1;"a"===e.localName.toLowerCase()?o=e:e=e.parentNode,n++}return o},VinylUtil.prototype.findFirstChild=function(e){for(var t=e.firstChild;t&&1!==t.nodeType;)t=t.nextSibling;return t},VinylUtil.prototype.getParam=function(e){var t=window.location.search.toLowerCase().substring(1),o=[];t.indexOf("&")<=-1?o.push(t):o=t.split("&");for(var n,i=0,a=o.length;i<a;i++)if(n=this.compareKeyValuePair(o[i],e))return n;return!1},VinylUtil.prototype.compareKeyValuePair=function(e,t){var o=e.split("=");if(2!==o.length)return!1;var n=decodeURIComponent(o[0]),i=decodeURIComponent(o[1]);return n.toString()===t&&i},VinylUtil.prototype.scrollIntoView=function(e,t){t||(t="top");var o,n=(window.pageYOffset||document.documentElement.scrollTop)-(document.documentElement.clientTop||0);switch(t){case"bottom":var i=this.getPosition(e).y+n,a=e.offsetHeight,r=i+a,l=30,s=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,d=r-s+l;o=d>=0?d:0;break;case"top":o=this.getPosition(e).y;break;default:throw"Invalid position."}var c=n;if(c!==o)var u=window.setInterval(function(){if(n!==o){var e=1,t=Math.abs(n-o);t<10?e=t:e+=Math.floor(Math.sqrt(t)),n>o?n-=e:n+=e,window.scrollTo(0,n)}else window.clearInterval(u)},25)},VinylUtil.prototype.waitUntilVisible=function(e,t){var o=window.setInterval(function(){this.checkVisible(document.querySelector(e))&&(window.clearInterval(o),t())},500)},VinylUtil.prototype.getPosition=function(e){for(var t=0,o=0;e;)t+=e.offsetLeft-e.scrollLeft+e.clientLeft,o+=e.offsetTop-e.scrollTop+e.clientTop,e=e.offsetParent;return{x:t,y:o}},VinylUtil.prototype.checkVisible=function(e){if(!e)throw"Invalid Element";var t=e.getBoundingClientRect(),o=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(t.bottom<0||t.top-o>=0)},VinylUtil.prototype.iOS=function(){var e=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"];if(navigator.platform)for(;e.length;)if(navigator.platform===e.pop())return!0;return!1},VinylUtil.prototype.isSafari=function(){var e=navigator.userAgent.toLowerCase();return e.indexOf("safari")!==-1&&!(e.indexOf("chrome")>-1)},VinylUtil.prototype.getMouseCoordinates=function(e){if("undefined"!=typeof e.pageX&&"undefined"!=typeof e.pageY)return[e.pageX,e.pageY];if(e.touches&&e.touches.length)return[e.touches[0].pageX,e.touches[0].pageY];throw"No coordinates in passed event."},VinylUtil.prototype.addEvents=function(e,t,o,n){"undefined"==typeof n&&(n=!1);for(var i=0,a=e.length;i<a;i++)t.addEventListener(e[i],o,n)},Vinylsiding.prototype.util=new VinylUtil,PersistentStorageClass.prototype.setData=function(e,t,o){"undefined"==typeof window.PersistentStorage.data[e]&&(window.PersistentStorage.data[e]={}),window.PersistentStorage.data[e][t]=o},PersistentStorageClass.prototype.getData=function(e,t){if("undefined"!=typeof window.PersistentStorage&&"undefined"!=typeof window.PersistentStorage.data[e]&&"undefined"!=typeof window.PersistentStorage.data[e][t])return window.PersistentStorage.data[e][t]},PersistentStorageClass.prototype.getElementId=function(e){return e.getAttribute("data-ps-id")},PersistentStorageClass.prototype.deleteModule=function(e){"undefined"!=typeof window.PersistentStorage.data[e]&&delete window.PersistentStorage.data[e],"undefined"!=typeof window.PersistentStorage.elements[e]&&delete window.PersistentStorage.elements[e]},PersistentStorageClass.prototype.deleteField=function(e,t){"undefined"!=typeof window.PersistentStorage.data[e]&&delete window.PersistentStorage.data[e][t]},PersistentStorageClass.prototype.setElementData=function(e,t,o){var n=this.getElementId(e);if(!n&&(n=this.tagElement(e,t),!n))throw"Element that should have an ID does not.";"undefined"==typeof window.PersistentStorage.elements[t]&&(window.PersistentStorage.elements[t]={}),"undefined"==typeof window.PersistentStorage.elements[t][n]&&(window.PersistentStorage.elements[t][n]={}),window.PersistentStorage.elements[t][n]=o},PersistentStorageClass.prototype.getElementData=function(e,t){var o=this.getElementId(e);if(o&&"undefined"!=typeof window.PersistentStorage&&"undefined"!=typeof window.PersistentStorage.elements[t]&&"undefined"!=typeof window.PersistentStorage.elements[t][o])return window.PersistentStorage.elements[t][o]},PersistentStorageClass.prototype.deleteElementData=function(e,t){var o=this.getElementId(e);return o&&"undefined"!=typeof window.PersistentStorage&&"undefined"!=typeof window.PersistentStorage.elements[t]&&"undefined"!=typeof window.PersistentStorage.elements[t][o]?void delete window.PersistentStorage.elements[o][t]:void console.debug("Call to delete non-existant element data")},PersistentStorageClass.prototype.nextID=function(){var e=window.PersistentStorage.uniq++;return e.toString()},PersistentStorageClass.prototype.tagElement=function(e,t){var o=this.nextID();return e.setAttribute("data-ps-id",o),o},Vinylsiding.prototype.data=new PersistentStorageClass,VinylLocks.prototype.acquireLock=function(e,t){return!!e&&(t||(t=1),!this.checkLock(e)&&(VS.data.setData("VinylLocks",e,Date.now()+t),!0))},VinylLocks.prototype.checkLock=function(e){var t=VS.data.getData("VinylLocks",e);return"undefined"!=typeof t&&(!(t<Date.now())||(this.clearLock(e),!1))},VinylLocks.prototype.clearLock=function(e){VS.data.deleteField("VinylLocks",e)},Vinylsiding.prototype.locks=new VinylLocks,Draggable.prototype.md=function(e){VS.data.setData("draggable-global","mouseIsDown",e)},Draggable.prototype.reset=function(e){this.setData(e,null,"lastMousePos"),this.md(!1)},Draggable.prototype.mouseIsUp=function(e){return VS.util.isSafari()?!VS.data.getData("draggable-global","mouseIsDown"):"undefined"!=typeof e.buttons&&0===e.buttons},Draggable.prototype.setData=function(e,t,o){var n=this.getData(e);"string"==typeof o?n[o]=t:n=t,VS.data.setElementData(e,"Draggable",n)},Draggable.prototype.getData=function(e){return VS.data.getElementData(e,"Draggable")},Draggable.prototype.dragEvent=function(e){"show"===document.body.getAttribute("data-vinyl-overlay")&&e.preventDefault();var t=VS.util.findParentWithClass(e.target,"draggable-initialized");if(t&&!Draggable.prototype.mouseIsUp(e)){var o=Draggable.prototype.getData(t);if(VS.locks.acquireLock(o.containerSelector,1e4)){var o=this.getData(t),n=VS.util.getMouseCoordinates(e);if(!o.lastMousePos)return this.setData(t,n,"lastMousePos"),void VS.locks.clearLock(o.containerSelector);try{o.callback(event,t,n,o.lastMousePos)}catch(e){throw VS.locks.clearLock(o.containerSelector),console.log(e),"Draggable callback failed"}finally{this.setData(t,n,"lastMousePos"),VS.locks.clearLock(o.containerSelector)}}}};var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};VinylTemplate.prototype.createElement=function(e,t,o){var n=document.createElement(e);"undefined"==typeof t&&(t={}),"undefined"!=typeof t.class&&(n.className=t.class,delete t.class),"img"===e&&"undefined"!=typeof t.src&&(n.src=t.src,delete t.src);for(var i in t)n.setAttribute(i,t[i]);return"undefined"!=typeof o&&this.setInnerHTML([n],o),n},VinylTemplate.prototype.setInnerHTML=function(e,t){if(!e||!e.length)throw"SetInnerHTML expects NodeList";for(var o=0,n=e.length;o<n;o++)switch("undefined"==typeof t?"undefined":_typeof(t)){case"string":e[o].textContent=t;break;case"object":if(this.emptyElement(e[o]),Array.isArray(t))for(var i=0,a=t.length;i<a;i++)e[o].appendChild(t[i]);else e[o].appendChild(t);break;default:throw"Unsupported content type in VinylTemplate.setInnerHTML"}},VinylTemplate.prototype.emptyElement=function(e){for(;e.firstChild;)e.removeChild(e.firstChild)},Vinylsiding.prototype.template=new VinylTemplate,VinylModal.prototype.addOverlayToDOM=function(){var e=document.createElement("div");e.className="overlay-top-level",document.onkeydown=function(e){e=e||window.event;var t=!1;t="key"in e?"Escape"===e.key||"Esc"===e.key:27==e.keyCode,t&&"true"===document.body.getAttribute("data-vinyl-overlay-closable")&&VS.modal.prototype.hideOverlay()},document.body.appendChild(e)},VinylModal.prototype.handleClickableClick=function(e){e.stopPropagation();var t=VS.util.findParentWithClass(e.target,"modal-content");if(!t)return VS.modal.prototype.hideOverlay();var o=t.getAttribute("data-vmodal-close");if(o)return VS.util.hasClass(e.target,o)?VS.modal.prototype.hideOverlay():void 0},VinylModal.prototype.handleOpenClick=function(e){var t=VS.util.findParentWithClass(e.target,"modal-trigger");t&&(VinylModal.prototype.showOverlay("true"===t.getAttribute("data-vmodal-clickclose")),VinylModal.prototype.showContent(t.getAttribute("data-vmodal-content")))},VinylModal.prototype.handleCloseClick=function(e){var t=VS.util.findParentWithClass(e.target,"clickable");if(t)VS.modal.prototype.handleClickableClick(e);else{var o="true"===document.body.getAttribute("data-vinyl-overlay-closable");if(o)return VS.modal.prototype.hideOverlay()}},VinylModal.prototype.showOverlay=function(e){document.body.setAttribute("data-vinyl-overlay","show"),e&&document.body.setAttribute("data-vinyl-overlay-closable","true")},VinylModal.prototype.hideOverlay=function(){document.body.setAttribute("data-vinyl-overlay","hide"),document.body.removeAttribute("data-vinyl-overlay-closable"),VinylModal.prototype.hideContent()},VinylModal.prototype.showContent=function(e){var t=document.querySelector(e);VS.util.addClass(t,"overlaid-item"),VS.util.removeClass(t,"hidden"),t.addEventListener("click",VS.modal.prototype.handleCloseClick)},VinylModal.prototype.hideContent=function(){var e=document.querySelector(".overlaid-item");e&&(VS.util.addClass(e,"hidden"),VS.util.removeClass(e,"overlaid-item"),e.removeEventListener("click",VS.modal.prototype.handleCloseClick))},Vinylsiding.prototype.modal=VinylModal,function(e,t){"function"==typeof define&&define.amd?define(["b"],t):(e=e||window,e.VS=t())}(void 0,function(){return new Vinylsiding});